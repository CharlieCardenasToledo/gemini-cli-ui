<div class="flex mb-4" [ngClass]="{'justify-end': message.from === 'user', 'justify-start': message.from === 'gemini'}">
  <div class="rounded-lg px-4 py-2"
       [ngClass]="{
         'bg-blue-500 text-white': message.from === 'user' && message.status !== 'error',
         'bg-gray-200': message.from === 'gemini' && message.status !== 'error',
         'bg-red-500 text-white': message.status === 'error'
       }">
    <ng-container *ngIf="message.status === 'sending' || message.status === 'loading'">
      <p>...</p>
    </ng-container>
    <ng-container *ngIf="message.status === 'error'">
      <p>Error: {{ message.errorMessage || 'An unknown error occurred.' }}</p>
    </ng-container>
    <ng-container *ngIf="message.status === 'sent' || !message.status">
      <p>{{ message.text }}</p>
    </ng-container>
  </div>
</div>