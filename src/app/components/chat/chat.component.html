<div class="flex flex-col h-screen">
  <!-- Session Management Section -->
  <div class="p-4 bg-gray-200 flex items-center space-x-4">
    <!-- Create New Session -->
    <input
      type="text"
      [(ngModel)]="newSessionName"
      placeholder="New session name"
      class="flex-grow rounded-lg p-2 border"
    />
    <button
      (click)="createNewSession()"
      class="px-4 py-2 bg-green-500 text-white rounded-lg"
    >
      Create Session
    </button>

    <!-- Load Existing Session -->
    <select
      (change)="loadSession($event)"
      class="rounded-lg p-2 border"
    >
      <option [value]="null" disabled selected>Select Session</option>
      <option *ngFor="let session of sessions" [value]="session.id">
        {{ session.name }} ({{ session.created_at | date:'short' }})
      </option>
    </select>
    <span *ngIf="currentSessionId">
      Current Session: {{ currentSessionName }}
    </span>

    <!-- Export Session -->
    <select
      [(ngModel)]="exportFormat"
      class="rounded-lg p-2 border"
      *ngIf="currentSessionId"
    >
      <option value="markdown">Markdown</option>
      <option value="txt">TXT</option>
      <option value="json">JSON</option>
    </select>
    <button
      (click)="exportCurrentSession()"
      class="px-4 py-2 bg-blue-500 text-white rounded-lg"
      *ngIf="currentSessionId"
    >
      Export Session
    </button>
  </div>

  <!-- Chat Display Area -->
  <div class="flex-grow overflow-y-auto p-4">
    <app-message *ngFor="let msg of messages" [message]="msg"></app-message>
  </div>

  <!-- Chat Input -->
  <app-chat-input (userInput)="handleUserInput($event)" [isLoading]="isSendingMessage"></app-chat-input>
</div>